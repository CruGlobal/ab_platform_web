<!DOCTYPE html>
<% /*This template is used by webpack to generate an index.html in ab-service-web. It includes the correct hashed
   app.js*/ %> <!-- see ab_platform_web/webpack/index.ejs -->
   <html>

   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>AppBuilder</title>
      <!-- https://www.filamentgroup.com/lab/load-css-simpler/#the-code -->
      <link href="/__getCookie" rel="stylesheet" media="print" onload="this.media='all'" />
<!--      <script type='text/javascript' src='/assets/dependencies/sails.io.js' reconnection="true" defer></script>  -->
      <script> 

         //
         // Setup some promises used during our boot up process.
         //

         // .__AB_preload  {Promise} our index.js script will await this 
         // before continuing the Bootstrap.init();  This way all resources will
         // be loaded before we start the initialization.
         window.__AB_preload = new Promise(async (resolve, reject) => {
            window.__AB_preload_resolve = resolve;
         });

         window.__AB_socketReady = new Promise((resolve) => {
            window.__AB_socketReady_resolve = resolve;
         });
      </script>
      <script type='text/javascript' src='/config/preloader' defer></script>  
   </head>

   <body style="margin:0q;">
      <div appbuilder-portal="default" appbuilder-portal-autoenter="true" style="height: 100vh;">
         <!-- Preloader UI (uses webix classes for style, not actually webix components) -->
         <div class="portalLogin" id="preloader" style="white-space: nowrap; 110%; height: 110%;">
            <div style="display: inline-block; vertical-align: top; border-width:
               0px; margin-top: 0px; margin-left: 0px; width: calc((100% -
               360px)/2); height: 100%;">
            </div>
            <div class="webix_view webix_layout_line"
               style="display: inline-block; vertical-align: top; border-top-width: 0px; border-bottom-width: 0px; margin-top: 0px; margin-left: -1px; width: 360px; height: 823px;">
               <div style="border-width: 0px; margin-left: 0px; margin-top: 0px; width: 360px; height: 313px;">
               </div>
               <div class="webix_view webix_layout_line"
                  style="margin-left: 0px; margin-top: -1px; width: 360px; height: 200px;">
                  <div class="webix_view preload-card webix_layout_line" style="margin-left: 0px; margin-top: 0px; width: 360px;
                     height: 200px;">
                     <div style="border-width: 0px; margin-left: 30px; margin-top: 30px; width: 300px; height: 110px;">
                        <div>
                           <div style="text-align: center; font-size:40px; line-height: 90px;">
                              <!-- a pure css loader from https://loading.io/css -->
                              <div class="lds-default" data-cy="preload-spinner">
                                 <div></div>
                                 <div></div>
                                 <div></div>
                                 <div></div>
                                 <div></div>
                                 <div></div>
                                 <div></div>
                                 <div></div>
                                 <div></div>
                                 <div></div>
                                 <div></div>
                                 <div></div>
                              </div>
                           </div>
                        </div>
                        <div class="webix_view"
                           style="border-width: 0px; margin-top: -1px; width: 300px; height: 31px;">
                           <div class="webix_template">
                              <div id="preload-text" style="text-align: center; font-size:14px;">
                                 Waiting for the API Server
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </body>

   </html>
